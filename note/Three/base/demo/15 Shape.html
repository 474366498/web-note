<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  </head>
  <style>
    body{
      margin:0;
    }
  </style>
  <body>
     
  </body>
  <script type="importmap">
    {
      "imports" : {
        "three" :"../../three/build/three.module.js" ,
        "plugins/":"../../three/jsm/"
      }
    }
  </script>
  <script type="module" >
    import * as T from 'three' 
    import {OrbitControls } from 'plugins/controls/OrbitControls.js'
    console.log(T , OrbitControls)

    var webgl , scene , camera , orbit 

    init() 
    render()
    function init () {

      scene = new T.Scene() 
      scene.background = 0x999999 
      scene.add(new T.AxesHelper(5e2))

      addExtrude()
      addExtrude1()
      camera = new T.PerspectiveCamera(60,window.innerWidth / window.innerHeight , .1, 1e3)
      camera.position.set(0,0,2e2)

      webgl = new T.WebGLRenderer({antialias:true})
      webgl.setPixelRatio(window.devicePixelRatio)
      webgl.setClearColor( 0x999999 )
      webgl.setSize(window.innerWidth,window.innerHeight)

      orbit = new OrbitControls(camera,webgl.domElement)
      orbit.addEventListener('change',render)
      document.body.appendChild(webgl.domElement)

    }
    
    function addExtrude () {

      const shape = new T.Shape([
        new T.Vector2(-50,-50) ,
        new T.Vector2(-50,50),
        new T.Vector2(50,50),
        new T.Vector2(50,-50)
      ])
      const extrudeSettings = {
        depth : 40,
        bevelEnabled : true ,
        bevelSegments : 4 ,
        steps : 4,
        bevelSize : 1 ,
        bevelThickness : 1 
      }
      const materials = [
        new T.MeshBasicMaterial({color:0xee0000}),
        new T.MeshBasicMaterial({color:0x00cc00}),
        new T.MeshBasicMaterial({color:0x0000ff}),
      ] 
      const mesh = new T.Mesh(new T.ExtrudeGeometry(shape,extrudeSettings) , materials)
      console.log(78,shape , mesh)
      scene.add(mesh)

    }

    function addExtrude1 () {
      const shape = new T.Shape()
      shape.moveTo(100,0)
      shape.lineTo(150,50)
      shape.splineThru([new T.Vector2(100,100),new T.Vector2(90,90)]) 
      shape.quadraticCurveTo(80,80,100,50)
      shape.quadraticCurveTo(50,50,100,0)

      const extrude = new T.ExtrudeGeometry(shape,{depth:40,bevelEnabled:false})
      const mesh = new T.Mesh(extrude,[new T.MeshBasicMaterial({color:0xeeEE00}),
        new T.MeshBasicMaterial({color:0x00ccEE}),])
      scene.add(mesh)  
    }



    function render() {
      webgl.render(scene,camera)
    }

  </script>
</html>