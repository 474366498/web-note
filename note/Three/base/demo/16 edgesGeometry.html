<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  </head>
  <style>
    body{
      margin:0;
    }
  </style>
  <body>
     
  </body>
  <script type="importmap">
    {
      "imports" : {
        "three" :"../../three/build/three.module.js" ,
        "plugins/":"../../three/jsm/"
      }
    }
  </script>
  <script type="module" >
    import * as T from 'three' 
    import {OrbitControls } from 'plugins/controls/OrbitControls.js'
    import { GUI } from 'plugins/libs/lil-gui.module.min.js'
    console.log(T , OrbitControls , GUI)

    var webgl , scene , camera , orbit , gui 

    init()
    render()

    function init () {

      scene = new T.Scene() 
      scene.add(new T.AxesHelper(5e2))

      addBox()
      addCylinder()

      camera = new T.PerspectiveCamera(60,window.innerWidth / window.innerHeight , .1,1e3)
      camera.position.set(50,50,50)

      webgl = new T.WebGLRenderer({antialias:true}) 
      webgl.setClearColor(0x888888)
      webgl.setSize(window.innerWidth,window.innerHeight)
      document.body.insertAdjacentElement('afterbegin',webgl.domElement)

      // gui = new GUI() 

      orbit = new OrbitControls(camera,webgl.domElement)
      orbit.addEventListener('change', render )
    }

    function addBox () {
      const b = new T.BoxGeometry(50,50,50) 
      const  mesh = new T.Mesh(b,new T.MeshLambertMaterial({
        color : 0x444444 ,
        transparent: true ,
        opacity : .5 
      }))
      scene.add(mesh) 

      const edges = new T.EdgesGeometry(b) 
      const line = new T.LineSegments(edges,new T.LineBasicMaterial({
        color: 0xffffff,
        linewidth: 10,
        linecap: 'round', //ignored by WebGLRenderer
        linejoin:  'round' //ignored by WebGLRenderer
      }))
      scene.add(line)

    }

    function addCylinder () {
      const cylinder = new T.CylinderGeometry(30,40,50,40,64,false) 
      const mesh = new T.Mesh(cylinder,new T.MeshLambertMaterial({
        color : 0x333333,
        transparent : true ,
        opacity : .75
      }))
      mesh.position.set(80,0,0)
      scene.add(mesh)

      const line = new T.LineSegments(
        new T.EdgesGeometry(cylinder) ,
        new T.LineBasicMaterial({
          color : 0xff0000 ,
          linewidth : 1,
        })
      )
      line.position.set(80,0,0)
      scene.add(line)
    }
    

    function render() {
      webgl.render(scene,camera )
    }


  </script>
</html>